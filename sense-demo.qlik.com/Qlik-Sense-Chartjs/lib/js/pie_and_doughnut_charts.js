var visualize=function(e,t,o,a){var l=t.qInfo.qId+"_chartjs_bar",n=a.calculateMargin(e,t),i=n[0],r=n[1];e.html('<canvas id="'+l+'" width="'+i+'" height="'+r+'"></canvas>');var s=[];s="auto"==t.colors?a.defineColorPalette(t.color_selection):t.custom_colors.split("-");var c=t.qHyperCube.qDataPages[0].qMatrix,u=12;"auto"==t.colors&&"one-handred"==t.color_selection?u=100:"custom"==t.colors&&(u=s.length);var d=c.map(function(e,o){return"rgba("+s[o%u]+","+t.opacity+")"});t.cumulative&&(c=a.addCumulativeValues(c));var m=document.getElementById(l);new Chart(m,{type:t.pie_doughnut,data:{labels:c.map(function(e){return e[0].qText}),datasets:[{label:t.qHyperCube.qMeasureInfo[0].qFallbackTitle,fill:t.background_color_switch,data:c.map(function(e){return e[1].qNum}),backgroundColor:d,borderColor:d,pointBackgroundColor:d,borderWidth:1}]},options:{title:{display:t.title_switch,text:t.title},legend:{display:"hide"!=t.legend_position,position:t.legend_position,onClick:function(e,t){var a=[],l=0;c[t.index][0].qElemNumber<0||(a.push(c[t.index][0].qElemNumber),o.selectValues(l,a,!0))}},scale:{ticks:{beginAtZero:!0,callback:function(e,o,l){return a.formatMeasure(e,t,0)}}},tooltips:{mode:"label",callbacks:{label:function(e,o){return o.labels[e.index]+": "+a.formatMeasure(o.datasets[0].data[e.index],t,0)}}},responsive:!0,events:["mousemove","mouseout","click","touchstart","touchmove","touchend"],onClick:function(e){var t=this.getElementsAtEvent(e);t.length>0&&a.makeSelectionsOnDataPoints(c[t[0]._index][0].qElemNumber,o)}}})};