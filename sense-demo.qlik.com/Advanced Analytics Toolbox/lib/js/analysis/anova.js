"use strict";define(["../util/utils","ng!$q"],function(e,a){return{createCube:function(a,t){var s=t.layout,n=e.validateDimension(s.props.dimensions[0]),i=e.validateDimension(s.props.dimensions[1]),r=[{qNullSuppression:!0,qDef:{qFieldDefs:[n]}},{qNullSuppression:!0,qDef:{qFieldDefs:[i]}}],l=e.validateMeasure(s.props.measures[0])+" as mea0, "+e.validateDimension(s.props.dimensions[1])+" as dim1",o="q$mea0 ~ q$dim1";t.dataTitle=e.validateDimension(s.props.dimensions[1]);var d="NS";e.displayDebugModeMessage(s.props.debugMode);var p=e.getDebugSaveDatasetScript(s.props.debugMode,"debug_anova.rda"),u="R.ScriptEvalExStr('"+d+"','"+p+" library(jsonlite); res<-summary(aov("+o+")); json<-toJSON(res[[1]]); json;', "+l+")";e.displayRScriptsToConsole(s.props.debugMode,[u]);var q=[{qDef:{qLabel:"Results",qDef:u}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}}];return t.backendApi.applyPatches([{qPath:"/qHyperCubeDef/qDimensions",qOp:"replace",qValue:JSON.stringify(r)},{qPath:"/qHyperCubeDef/qMeasures",qOp:"replace",qValue:JSON.stringify(q)}],!1),t.patchApplied=!0,null},drawChart:function(t){var s=a.defer(),n=t.layout,i=e.validateDimension(n.props.dimensions[1]),r=[{qTop:0,qLeft:0,qWidth:6,qHeight:1}];return t.backendApi.getData(r).then(function(a){a[0].qMatrix,t.layout.qHyperCube.qMeasureInfo;if(0===a[0].qMatrix[0][2].qText.length||"-"==a[0].qMatrix[0][2].qText)e.displayConnectionError(t.extId);else{e.displayReturnedDatasetToConsole(n.props.debugMode,a[0]);for(var r=JSON.parse(a[0].qMatrix[0][2].qText),l='\n            <h2>ANOVA - Single factor</h2>\n            <table class="simple">\n              <thead>\n                <tr>\n                  </th><th><th>Df</th><th>Sum Sq</th><th>Mean Sq</th><th>F value</th><th>Pr(>F)</th><th></th>\n                </tr>\n              </thead>\n              <tbody>\n         ',o=[i,"Residuals"],d=0;d<o.length;d++)l+="\n              <tr><td>"+o[d]+"</td><td>"+r[d].Df+"</td><td>"+r[d]["Sum Sq"]+"</td><td>"+r[d]["Mean Sq"]+"</td><td>"+("undefined"!=typeof r[d]["F value"]?r[d]["F value"]:"")+"</td><td>"+("undefined"!=typeof r[d]["Pr(>F)"]?r[d]["Pr(>F)"]:"")+"</td>\n              <td>"+(r[d]["Pr(>F)"]<.001?'<span class="lui-icon  lui-icon--star"></span><span class="lui-icon  lui-icon--star"></span><span class="lui-icon  lui-icon--star"></span>':r[d]["Pr(>F)"]<.01?'<span class="lui-icon  lui-icon--star"></span><span class="lui-icon  lui-icon--star"></span>':r[d]["Pr(>F)"]<.05?'<span class="lui-icon  lui-icon--star"></span>':r[d]["Pr(>F)"]<.1?".":"")+"</td>\n              </tr>";l+="\n              </tbody>\n            </table>\n            <div>Signif. codes: 0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</div>\n          ",$(".advanced-analytics-toolsets-"+t.extId).html(l)}return s.resolve()}),s.promise}}});
//# sourceMappingURL=../../maps/analysis/anova.js.map
