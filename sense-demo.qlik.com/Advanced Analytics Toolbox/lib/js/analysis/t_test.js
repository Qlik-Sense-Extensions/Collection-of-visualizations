"use strict";define(["../util/utils","ng!$q"],function(e,t){return{createCube:function(t,a){var s=a.layout,r=e.validateDimension(s.props.dimensions[0]),d=[{qNullSuppression:!0,qDef:{qFieldDefs:[r]}}];a.dataTitle="";var n="",i=s.props.analysisTypeId;switch(i){case 3:a.dataTitle="Two sample t-test:",n=",var.equal=T";break;case 4:a.dataTitle="Welch two sample t-test:",n=",var.equal=F";break;case 5:a.dataTitle="Paired t-test:",n=",paired=T"}var l=e.validateMeasure(s.props.measures[0]),o=e.validateMeasure(s.props.measures[1]);e.displayDebugModeMessage(s.props.debugMode);var p=e.getDebugSaveDatasetScript(s.props.debugMode,"debug_t_test.rda"),u="R.ScriptEvalExStr('NN','"+p+" library(jsonlite); res<-t.test(q$SampleA, q$SampleB, conf.level="+s.props.confidenceLevel+n+"); json<-toJSON(list(as.double(res$statistic),as.double(res$parameter),res$p.value,res$conf.int[1],res$conf.int[2],as.double(res$estimate))); json;', "+l+" as SampleA, "+o+" as SampleB)";e.displayRScriptsToConsole(s.props.debugMode,[u]);var q=[{qDef:{qLabel:"Results",qDef:u}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}}];return a.backendApi.applyPatches([{qPath:"/qHyperCubeDef/qDimensions",qOp:"replace",qValue:JSON.stringify(d)},{qPath:"/qHyperCubeDef/qMeasures",qOp:"replace",qValue:JSON.stringify(q)}],!1),a.patchApplied=!0,null},drawChart:function(a){var s=t.defer(),r=a.layout,d=(e.validateDimension(r.props.dimensions[0]),[{qTop:0,qLeft:0,qWidth:6,qHeight:1}]);return a.backendApi.getData(d).then(function(t){a.layout.qHyperCube.qMeasureInfo;if(0===t[0].qMatrix[0][1].qText.length||"-"==t[0].qMatrix[0][1].qText)e.displayConnectionError(a.extId);else{e.displayReturnedDatasetToConsole(r.props.debugMode,t[0]);var d=JSON.parse(t[0].qMatrix[0][1].qText),n=d[0][0],i=d[1][0],l=d[2][0],o=d[3][0],p=d[4][0],u=d[5],q="\n            <h2>"+a.dataTitle+'</h2>\n            <table class="simple">\n              <thead>\n                <tr>\n                  <th>Item</th><th>Value</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr><td>t</td><td>'+n+"</td></tr>\n                <tr><td>df</td><td>"+i+"</td></tr>\n                <tr><td>p-value</td><td>"+l+"</td></tr>\n                <tr><td>"+100*r.props.confidenceLevel+"% confidence interval</td><td>"+o+", "+p+"</td></tr>\n          ",f=r.props.analysisTypeId;3===f||4===f?q+="<tr><td>Sample estimates</td><td>mean of x: "+u[0]+", mean of y: "+u[1]+"</td></tr>":5===f&&(q+="<tr><td>Sample estimates</td><td>mean of the differences: "+u[0]+"</td></tr>"),q+="</tbody></table>\n          <div>* alternative hypothesis: true difference in means is not equal to 0</div>",$(".advanced-analytics-toolsets-"+a.extId).html(q)}return s.resolve()}),s.promise}}});
//# sourceMappingURL=../../maps/analysis/t_test.js.map
