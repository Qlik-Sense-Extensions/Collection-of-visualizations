define(["qvangular","angular","../modules/utils/wiUtils","../lib/external/FileSaver/FileSaver","../lib/external/jszip/jszip.min"],function(a,b,c,d,e){"use strict";a.service("wiPopupExportService",function(){return{"export":function(a){var b=new e;if(b.file("css.txt",a.less+"\n"),b.file("data.json",a.data+"\n"),b.file("html.html",a.html+"\n"),b.file("qWidget.json",""),!c.isBlank(a.previewImgSelector)){var d=new Image;d.src=$(a.previewImgSelector).find(">:first-child")[0].toDataURL("image/png"),b.file("preview.png",d.src.substr(d.src.indexOf(",")+1),{base64:!0})}var f=b.generate({type:"blob"}),g=c.sanitizedFileName(a.FileName)+".zip";saveAs(f,g)}}})});