define(["jquery","qvangular","angular","objects.extension/base-controller","underscore","../../modules/utils/wiUtils"],function(a,b,c,d,e,f){"use strict";var g={animate:!0,max:100},h=d.extend({init:function(a,b){var d=this,e=c.isDefined(b.animate)?a.$parent.$eval(b.animate):g.animate;this.bars=[],a.max=c.isDefined(b.max)?a.$parent.$eval(b.max):g.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}});b.directive("wiProgressbar",function(){return{restrict:"E",replace:!0,transclude:!0,controller:["$scope","$attrs",h],scope:{value:"=",design:"@"},templateUrl:"/extensions/qWidget/components/wiProgressbar/template/progressbar.html",compile:function(){return f.addStyleLinkToHeader("wiBootstrap","/extensions/qwidget/components/wiBootstrap/css/wiBootstrap.css"),{pre:function(b,c){var d=a(document.createElement("div"));d.addClass("wi-bs"),c.wrap(d)},post:function(a,b,d,e){e.addBar(a,c.element(b.children()[0]))}}}}}),b.directive("progress",function(){return{restrict:"E",replace:!0,transclude:!0,controller:["$scope","$attrs",h],require:"progress",scope:{},templateUrl:"/extensions/qWidget/components/wiProgressbar/template/progress.html"}}),b.directive("bar",function(){return{restrict:"E",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",design:"@"},templateUrl:"/extensions/qWidget/components/wiProgressbar/template/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}),b.directive("progressbar",function(){return{restrict:"E",replace:!0,transclude:!0,controller:["$scope","$attrs",h],scope:{value:"=",design:"@"},templateUrl:"/extensions/qWidget/components/wiProgressbar/template/progressbar.html",compile:function(){return{post:function(a,b,d,e){e.addBar(a,c.element(b.children()[0]))}}}}})});