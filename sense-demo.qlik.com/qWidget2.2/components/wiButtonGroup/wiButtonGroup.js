define(["jquery","qvangular","angular","objects.extension/base-controller","./../../modules/utils/wiUtils","./../assets/wiVariableService","text!./../wiBootstrap/css/wiBootstrap.css"],function(a,b,c,d,e,f,g){"use strict";var h={activeClass:"active",toggleEvent:"click"};b.directive("wiButtongroup",["wiVariableService",function(a){return{restrict:"E",replace:!0,transclude:!0,scope:{bindQsVar:"@"},template:'<div class="wi-bs"><div class="btn-group" ng-model="groupModel" ng-transclude></div></div>',controller:["$scope",function(b){this.checkModel={},this.radioModel=null,this.getbindQsVar=function(){return b.bindQsVarParent},this.setRadioValue=function(c){a.setVariableContent(b.bindQsVarParent,c).then(function(){b.radioModel=c,b.changeName({value:c,id:b.$parent.layout.qInfo.qId})}).catch(function(a){})},this.setHasRadios=function(){b.hasRadios=!0}}],link:function(b,d,f){b.bindQsVarParent=f.bindQsVar,b.changeName=function(a){b.$parent.$broadcast("RenderRadios",a)};var h=function(){e.addStyleToHeader("wiBootstrap",g),b.hasRadios&&c.isDefined(f.bindQsVar)&&a.getVariableContent(f.bindQsVar).then(function(a){if(a.qContent){var c=a.qContent.qString;b.radioModel=c,b.changeName({value:c,id:b.$parent.layout.qInfo.qId})}})};h()}}}]),b.directive("wiCheckButton",["wiVariableService",function(a){return{restrict:"E",require:["^wiButtongroup"],replace:!0,scope:{value:"@",label:"@",checked:"@",bindQsVar:"@",design:"@"},template:'<label class="btn" ng-class="(design) ? \'btn-\' + design : \'btn-default\'" ng-model="groupModel">{{label}}</label>',link:function(b,d,e,f){f[0].checkModel[e.value]=!1,b.modelIsChecked=!1;var g=function(a){d.toggleClass(h.activeClass,a)},i=function(){c.isDefined(e.checked)&&e.checked?j(!0):a.getVariableContent(e.bindQsVar).then(function(a){if(a.qContent&&a.qContent.qIsNum){var c="0"===a.qContent.qString?!1:!0;c===!0&&(b.modelIsChecked=!0,g(!0))}})},j=function(c){var d=c?1:0;a.setVariableContent(e.bindQsVar,"=("+d+")").then(function(){b.modelIsChecked=c,f[0].checkModel[e.value]=c,g(c)}).catch(function(a){})};d.bind(h.toggleEvent,function(){if(!c.isDefined(e.uncheckable)){var a=d.hasClass(h.activeClass);a===b.modelIsChecked&&j(!a)}}),i()}}}]),b.directive("wiRadioButton",["wiVariableService",function(){return{restrict:"E",require:["^wiButtongroup"],replace:!0,scope:{value:"@",label:"@",design:"@"},template:'<label class="btn" ng-class="(design) ? \'btn-\' + design : \'btn-default\'" ng-model="groupModel" value="{{value}}">{{label}}</label>',link:function(a,b,c,d){function e(){i()}var f=d[0];f.setHasRadios();var g=function(a){b.toggleClass(h.activeClass,a)};b.bind(h.toggleEvent,function(){f.setRadioValue(a.$eval(c.value)),f.radioModel=a.$eval(c.value)});var i=a.$on("RenderRadios",function(b,d){d.id===a.$parent.$parent.layout.qInfo.qId&&g(a.$eval(c.value)===d.value)});b.bind("$destroy",e)}}}])});