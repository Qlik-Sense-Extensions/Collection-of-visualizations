define(["jquery","underscore","angular","qvangular","qlik","client.utils/routing","client.utils/state","../../modules/utils/wiUtils"],function($,_,angular,qvangular,qlik,Routing,State,wiUtils){"use strict";var getCurrAppDocId=function(){var a=document.location.pathname,b=a.substr(a.indexOfNth("/",2)+1);return b.substr(0,b.indexOf("/sheet"))};qvangular.service("wiActionService",["$q","$timeout",function(q,timeout){return{e:function(o){eval("this."+o)},gotoSheet:function(a){Routing.goToSheet(a,Object.keys(State.States)[State.state])},nextSheet:function(a){var b=State.getModel().id;_.each(a.sheets,function(a,c,d){return a.qInfo.qId===b?c<d.length-1?Routing.goToSheet(d[c+1].qInfo.qId,Object.keys(State.States)[State.state]):Routing.goToSheet(d[0].qInfo.qId,Object.keys(State.States)[State.state]):void 0})},prevSheet:function(a){var b=State.getModel().id;_.each(a.sheets,function(a,c,d){return a.qInfo.qId===b?0!==c?Routing.goToSheet(d[c-1].qInfo.qId,Object.keys(State.States)[State.state]):Routing.goToSheet(d[d.length-1].qInfo.qId,Object.keys(State.States)[State.state]):void 0})},bookmark:{apply:function(a){var b=qlik.currApp();b.bookmark.apply(a)},create:function(a,b){var c=qlik.currApp();c.bookmark.create(a,b)},remove:function(a){var b=qlik.currApp();b.bookmark.remove(a)}},variable:{create:function(a){var b=qlik.currApp();b.variable.create(a).then(function(a){})},setContent:function(a,b){var c=qlik.currApp();c.variable.setContent(a,b).then(function(a){})}},field:{clear:function(a){var b=qlik.currApp();b.field(a).clear()},clearOther:function(a,b){var c=qlik.currApp();c.field(a).clearOther(b)},lock:function(a){var b=qlik.currApp();b.field(a).lock()},select:function(a,b,c,d){var e=qlik.currApp();e.field(a).select(b,c,d)},selectAll:function(a,b){var c=qlik.currApp();c.field(a).selectAll(b)},selectAlternative:function(a,b){var c=qlik.currApp();c.field(a).selectAlternative(b)},selectExcluded:function(a,b){var c=qlik.currApp();c.field(a).selectExcluded(b)},selectMatch:function(a,b,c){var d=qlik.currApp();d.field(a).selectMatch(b,c)},selectPossible:function(a,b){var c=qlik.currApp();c.field(a).selectPossible(b)},toggleSelect:function(a,b,c){var d=qlik.currApp();d.field(a).toggleSelect(b,c)},unlock:function(a){var b=qlik.currApp();b.field(a).unlock()}}}}])});