var visualize=function(e,t,a,l){function o(e,t,o){var i=t.qInfo.qId+"_chartjs_bubble",r=l.calculateMargin(e,t),n=r[0],s=r[1],u=[],c=0;"auto"==t.colors?(u=l.defineColorPalette("palette"),c=t.color):u=t.custom_colors.split("-");var b="rgba("+u[c]+","+t.opacity+")",d=[];"auto"==t.line_color_switch?d[0]="rgba("+l.defineColorPalette("palette")[7]+",1.0)":"single"==t.line_color_selection?d[0]="rgba("+l.defineColorPalette("palette")[t.line_color_picker]+",1.0)":d="custom"==t.line_color_selection_for_measure?t.line_custom_color.split("-"):l.defineColorPalette(t.line_color_selection_for_measure),e.html('<canvas id="'+i+'" width="'+n+'" height="'+s+'"></canvas>');var m=o,_=t.qHyperCube.qMeasureInfo.length,p="",q=t.bubble_size,f=m.length;if(_>=3){var g=f>30?30:f,h=t.qHyperCube.qMeasureInfo[2].qMin,v=t.qHyperCube.qMeasureInfo[2].qMax;p=v-h>0?(v-h)/g:v/g}t.cumulative&&(m=l.addCumulativeValues(m));var y=[{type:"bubble",label:t.qHyperCube.qDimensionInfo[0].qFallbackTitle,data:m.map(function(e){return 2==_?{label:e[0].qText,x:e[1].qNum,y:e[2].qNum,r:q}:{label:e[0].qText,x:e[1].qNum,y:e[2].qNum,z:e[3].qNum,r:Math.floor(e[3].qNum/p/g*q)}}),backgroundColor:b,borderColor:b,borderWidth:1}];if(_>=4)for(var C=4;C<=_;C++){var x="";x="auto"==t.line_color_switch||"single"==t.line_color_selection?d[0]:"rgba("+d[C-4]+",1)",y.push({type:"line",label:t.qHyperCube.qMeasureInfo[C-1].qFallbackTitle,data:m.map(function(e){return{label:e[0].qText,x:e[1].qNum,y:e[C].qNum}}),backgroundColor:"rgba(0,0,0,0)",borderColor:x,pointBackgroundColor:"rgba(0,0,0,0)",borderWidth:t.line_width,pointRadius:0})}var k=document.getElementById(i);new Chart(k,{data:{labels:m.map(function(e){return e[1].qNum}),datasets:y},options:{title:{display:t.title_switch,text:t.title},legend:{display:"hide"!=t.legend_position,position:t.legend_position,onClick:function(e,t){}},scales:{xAxes:[{type:t.xscale_mode_bubble,position:"bottom",scaleLabel:{display:t.datalabel_switch,labelString:t.qHyperCube.qMeasureInfo[0].qFallbackTitle},ticks:{beginAtZero:t.begin_at_zero_switch,callback:function(e,a,o){return l.formatMeasure(e,t,0)}}}],yAxes:[{scaleLabel:{display:t.datalabel_switch,labelString:t.qHyperCube.qMeasureInfo[1].qFallbackTitle},ticks:{beginAtZero:t.begin_at_zero_switch,callback:function(e,a,o){return l.formatMeasure(e,t,1)}}}]},tooltips:{mode:"label",callbacks:{label:function(e,a){var o=a.datasets[0].data[e.index].label+": "+l.formatMeasure(a.datasets[0].data[e.index].x,t,0)+", "+l.formatMeasure(a.datasets[0].data[e.index].y,t,1);return 2==_?o:o+", "+l.formatMeasure(a.datasets[0].data[e.index].z,t,2)}}},responsive:!0,events:["mousemove","mouseout","click","touchstart","touchmove","touchend"],onClick:function(e){var t=this.getElementsAtEvent(e);t.length>0&&l.makeSelectionsOnDataPoints(m[t[0]._index][0].qElemNumber,a)}}})}l.pageExtensionData(a,e,t,o)};