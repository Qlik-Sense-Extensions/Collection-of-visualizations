var visualize=function(e,o,t,a){var l=o.qInfo.qId+"_chartjs_bar",r=a.calculateMargin(e,o),i=r[0],c=r[1];e.html('<canvas id="'+l+'" width="'+i+'" height="'+c+'"></canvas>');var n=o.qHyperCube.qMeasureInfo.length,s=[],u=0;"auto"==o.colors?(s=a.defineColorPalette("palette"),u=o.color):s=o.custom_colors.split("-");var b="rgba("+s[u]+","+o.opacity+")",d=[];"auto"==o.line_color_switch?d[0]="rgba("+a.defineColorPalette("palette")[7]+",1.0)":"single"==o.line_color_selection?d[0]="rgba("+a.defineColorPalette("palette")[o.line_color_picker]+",1.0)":d="custom"==o.line_color_selection_for_measure?o.line_custom_color.split("-"):a.defineColorPalette(o.line_color_selection_for_measure);var _="",p=[];"auto"==o.colors&&o.background_color_switch?_="rgba("+s[o.background_color]+","+o.opacity+")":"auto"==o.colors?_="rgba("+s[o.color]+","+o.opacity+")":"custom"==o.colors&&o.background_color_switch?(p=o.custom_background_color.split("-"),_="rgba("+p[0]+","+o.opacity+")"):"custom"==o.colors&&(_="rgba("+s[u]+","+o.opacity+")"),o.background_color_switch?"rgba("+s[o.background_color]+","+o.opacity+")":"rgba("+s[o.color]+","+o.opacity+")";var g=o.qHyperCube.qDataPages[0].qMatrix;o.cumulative&&(g=a.addCumulativeValues(g));var m=[{type:"line",label:o.qHyperCube.qMeasureInfo[0].qFallbackTitle,fill:o.background_color_switch,data:g.map(function(e){return{label:e[0].qText,x:e[0].qNum,y:e[1].qNum}}),backgroundColor:_,borderColor:b,pointBackgroundColor:b,borderWidth:1,pointRadius:o.point_radius_size}];if(n>=2)for(var h=2;h<=n;h++){var q="";q="auto"==o.line_color_switch||"single"==o.line_color_selection?d[0]:"rgba("+d[h-2]+",1)",m.push({type:"line",label:o.qHyperCube.qMeasureInfo[h-1].qFallbackTitle,data:g.map(function(e){return{label:e[0].qText,x:e[0].qNum,y:e[h].qNum}}),backgroundColor:"rgba(0,0,0,0)",borderColor:q,pointBackgroundColor:"rgba(0,0,0,0)",borderWidth:o.line_width,pointRadius:0})}var f=document.getElementById(l);new Chart(f,{data:{labels:g.map(function(e){return e[0].qText}),datasets:m},options:{title:{display:o.title_switch,text:o.title},legend:{display:"hide"!=o.legend_position,position:o.legend_position,onClick:function(e,o){}},scales:{xAxes:[{type:o.xscale_mode,position:"bottom",scaleLabel:{display:o.datalabel_switch,labelString:o.qHyperCube.qDimensionInfo[0].qFallbackTitle}}],yAxes:[{scaleLabel:{display:o.datalabel_switch,labelString:o.qHyperCube.qMeasureInfo[0].qFallbackTitle},ticks:{beginAtZero:o.begin_at_zero_switch,callback:function(e,t,l){return a.formatMeasure(e,o,0)}}}]},tooltips:{mode:"label",callbacks:{label:function(e,t){return t.datasets[e.datasetIndex].label+": "+a.formatMeasure(e.yLabel,o,0)}}},responsive:!0,events:["mousemove","mouseout","click","touchstart","touchmove","touchend"],onClick:function(e){var o=this.getElementsAtEvent(e);o.length>0&&a.makeSelectionsOnDataPoints(g[o[0]._index][0].qElemNumber,t)}}})};